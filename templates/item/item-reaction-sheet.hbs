<form class="{{cssClass}} {{item.type}} flexcol" autocomplete="off">

  {{!-- Sheet Header --}}
  {{> "systems/anyventure/templates/partials/items/item-header.hbs"}}

  {{!-- Sheet Tab Navigation --}}
  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item active" data-tab="basic">Basic</a>
    <a class="item" data-tab="properties">Properties</a>
  </nav>

  {{!-- Sheet Body --}}
  <section class="sheet-body">

    {{!-- Basic Tab --}}
    <div class="tab active" data-group="primary" data-tab="basic">
      <div class="action-basic-section">
        <div class="form-group">
          <label>Energy Cost</label>
          <input type="number" name="system.energy" value="{{system.energy}}" data-dtype="Number" min="0" max="10" placeholder="0"/>
        </div>

        <div class="action-checkboxes">
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" name="system.daily" {{#if system.daily}}checked{{/if}}/>
              Daily Use
            </label>
          </div>
          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" name="system.magic" {{#if system.magic}}checked{{/if}}/>
              Magical
            </label>
          </div>
        </div>

        {{!-- Description --}}
        <div class="form-group stacked">
          <label>Description</label>
          <div class="editor">{{editor system.description target="system.description" button=true owner=owner editable=editable}}</div>
        </div>
      </div>
    </div>

    {{!-- Properties Tab --}}
    <div class="tab" data-group="primary" data-tab="properties">

      {{!-- Optional Attack Section --}}
      <div class="attack-section">
        <h3>Attack (Optional)</h3>
        <div class="attack-grid" style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
          {{!-- Row 1: Attack Roll, Category, Range --}}
          <div class="form-group">
            <label>Attack Roll</label>
            <input type="text" name="system.roll" value="{{system.roll}}" placeholder="2d6"/>
          </div>

          <div class="form-group">
            <label>Category</label>
            <select name="system.category" data-dtype="String">
              <option value="slash" {{#if (eq system.category "slash")}}selected{{/if}}>Slash</option>
              <option value="pierce" {{#if (eq system.category "pierce")}}selected{{/if}}>Pierce</option>
              <option value="blunt" {{#if (eq system.category "blunt")}}selected{{/if}}>Blunt</option>
            </select>
          </div>

          {{> "systems/anyventure/templates/partials/dropdowns/range-select.hbs"
              minName="system.min_range"
              maxName="system.max_range"
              minValue=system.min_range
              maxValue=system.max_range
              label="Range"
              mode="dual"}}

          {{!-- Row 2: Base Damage, Extra Damage, Damage Type --}}
          <div class="form-group">
            <label>Base Damage</label>
            <input type="text" name="system.damage" value="{{system.damage}}" placeholder="0"/>
          </div>

          <div class="form-group">
            <label>Extra Damage</label>
            <input type="text" name="system.damage_extra" value="{{system.damage_extra}}" placeholder="0"/>
          </div>

          {{> "systems/anyventure/templates/partials/dropdowns/damage-type-select.hbs"
              name="system.damage_type"
              value=system.damage_type}}
        </div>
      </div>

      {{!-- Auto Roll Section --}}
      <div class="autoroll-section">
        <h3>Auto Roll</h3>
        <div class="autoroll-fields">
          {{> "systems/anyventure/templates/partials/dropdowns/skill-select.hbs"
              name="system.checkSkill"
              value=system.checkSkill
              label="Skill"
              includeAllSkills=true}}

          <div class="form-group">
            <label>Roll Value</label>
            <input type="text" name="system.rollValue" value="{{system.rollValue}}" placeholder="e.g., 10"/>
          </div>

          <div class="form-group checkbox-group">
            <label>
              <input type="checkbox" name="system.singleRoll" {{#if system.singleRoll}}checked{{/if}}/>
              Single Roll (1d)
            </label>
          </div>
        </div>
      </div>

    </div>

  </section>
</form>
