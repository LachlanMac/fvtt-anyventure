{{!-- NPC Skills Page (character-style, editable, basic + languages only) --}}
<div class="skills-page">
  <div class="skills-grid">
    <div class="skills-column">
      {{!-- Physique --}}
      <div class="attribute-block">
        <div class="attribute-header">
          <h3 class="attribute-name"><i class="fas fa-dumbbell"></i> Physique</h3>
          <div class="talent-stars"><input type="number" name="system.attributes.physique.value" value="{{system.attributes.physique.value}}" min="0" max="6" style="width:32px; margin-right:6px;"/>{{#times system.attributes.physique.value}}<i class="fas fa-star filled"></i>{{/times}}</div>
        </div>
        <div class="skills-list">
          {{#each skillCategories.basic as |skill key|}}
            {{#if (eq skill.attribute "physique")}}
            <div class="skill-row">
              <span class="skill-name {{#if (gte skill.value 0)}}rollable skill-roll{{/if}}" data-category="basic" data-skill="{{key}}">{{localizeSkill key}}</span>
              <div class="skill-value-group">
                <input type="number" class="skill-value" name="system.basic.{{key}}.value" value="{{skill.value}}" data-dtype="Number" min="0" max="6"/>
                <span class="skill-die {{skillUpgradeClass skill.tier}}">{{#if (gte skill.value 0)}}{{skill.talent}}{{skillDieWithUpgrade skill.value skill.tier}}{{/if}}</span>
              </div>
            </div>
            {{/if}}
          {{/each}}
        </div>
      </div>

      {{!-- Finesse --}}
      <div class="attribute-block">
        <div class="attribute-header">
          <h3 class="attribute-name"><i class="fas fa-feather-alt"></i> Finesse</h3>
          <div class="talent-stars"><input type="number" name="system.attributes.finesse.value" value="{{system.attributes.finesse.value}}" min="0" max="6" style="width:32px; margin-right:6px;"/>{{#times system.attributes.finesse.value}}<i class="fas fa-star filled"></i>{{/times}}</div>
        </div>
        <div class="skills-list">
          {{#each skillCategories.basic as |skill key|}}
            {{#if (eq skill.attribute "finesse")}}
            <div class="skill-row">
              <span class="skill-name {{#if (gte skill.value 0)}}rollable skill-roll{{/if}}" data-category="basic" data-skill="{{key}}">{{localizeSkill key}}</span>
              <div class="skill-value-group">
                <input type="number" class="skill-value" name="system.basic.{{key}}.value" value="{{skill.value}}" data-dtype="Number" min="0" max="6"/>
                <span class="skill-die {{skillUpgradeClass skill.tier}}">{{#if (gte skill.value 0)}}{{skill.talent}}{{skillDieWithUpgrade skill.value skill.tier}}{{/if}}</span>
              </div>
            </div>
            {{/if}}
          {{/each}}
        </div>
      </div>

      {{!-- Mind --}}
      <div class="attribute-block">
        <div class="attribute-header">
          <h3 class="attribute-name"><i class="fas fa-brain"></i> Mind</h3>
          <div class="talent-stars"><input type="number" name="system.attributes.mind.value" value="{{system.attributes.mind.value}}" min="0" max="6" style="width:32px; margin-right:6px;"/>{{#times system.attributes.mind.value}}<i class="fas fa-star filled"></i>{{/times}}</div>
        </div>
        <div class="skills-list">
          {{#each skillCategories.basic as |skill key|}}
            {{#if (eq skill.attribute "mind")}}
            <div class="skill-row">
              <span class="skill-name {{#if (gte skill.value 0)}}rollable skill-roll{{/if}}" data-category="basic" data-skill="{{key}}">{{localizeSkill key}}</span>
              <div class="skill-value-group">
                <input type="number" class="skill-value" name="system.basic.{{key}}.value" value="{{skill.value}}" data-dtype="Number" min="0" max="6"/>
                <span class="skill-die {{skillUpgradeClass skill.tier}}">{{#if (gte skill.value 0)}}{{skill.talent}}{{skillDieWithUpgrade skill.value skill.tier}}{{/if}}</span>
              </div>
            </div>
            {{/if}}
          {{/each}}
        </div>
      </div>
    </div>

    <div class="skills-column">
      {{!-- Knowledge --}}
      <div class="attribute-block">
        <div class="attribute-header">
          <h3 class="attribute-name"><i class="fas fa-book"></i> Knowledge</h3>
          <div class="talent-stars"><input type="number" name="system.attributes.knowledge.value" value="{{system.attributes.knowledge.value}}" min="0" max="6" style="width:32px; margin-right:6px;"/>{{#times system.attributes.knowledge.value}}<i class="fas fa-star filled"></i>{{/times}}</div>
        </div>
        <div class="skills-list">
          {{#each skillCategories.basic as |skill key|}}
            {{#if (eq skill.attribute "knowledge")}}
            <div class="skill-row">
              <span class="skill-name {{#if (gte skill.value 0)}}rollable skill-roll{{/if}}" data-category="basic" data-skill="{{key}}">{{localizeSkill key}}</span>
              <div class="skill-value-group">
                <input type="number" class="skill-value" name="system.basic.{{key}}.value" value="{{skill.value}}" data-dtype="Number" min="0" max="6"/>
                <span class="skill-die {{skillUpgradeClass skill.tier}}">{{#if (gte skill.value 0)}}{{skill.talent}}{{skillDieWithUpgrade skill.value skill.tier}}{{/if}}</span>
              </div>
            </div>
            {{/if}}
          {{/each}}
        </div>
      </div>

      {{!-- Social --}}
      <div class="attribute-block">
        <div class="attribute-header">
          <h3 class="attribute-name"><i class="fas fa-comments"></i> Social</h3>
          <div class="talent-stars"><input type="number" name="system.attributes.social.value" value="{{system.attributes.social.value}}" min="0" max="6" style="width:32px; margin-right:6px;"/>{{#times system.attributes.social.value}}<i class="fas fa-star filled"></i>{{/times}}</div>
        </div>
        <div class="skills-list">
          {{#each skillCategories.basic as |skill key|}}
            {{#if (eq skill.attribute "social")}}
            <div class="skill-row">
              <span class="skill-name {{#if (gte skill.value 0)}}rollable skill-roll{{/if}}" data-category="basic" data-skill="{{key}}">{{localizeSkill key}}</span>
              <div class="skill-value-group">
                <input type="number" class="skill-value" name="system.basic.{{key}}.value" value="{{skill.value}}" data-dtype="Number" min="0" max="6"/>
                <span class="skill-die {{skillUpgradeClass skill.tier}}">{{#if (gte skill.value 0)}}{{skill.talent}}{{skillDieWithUpgrade skill.value skill.tier}}{{/if}}</span>
              </div>
            </div>
            {{/if}}
          {{/each}}
        </div>
      </div>
    </div>
  </div>

  {{#with skillCategories.language}}
    {{#if this}}
    <div class="specialized-skills">
      <div class="skill-category-block">
        <h3 class="category-header">
          <i class="fas fa-comments"></i>
          Language Skills
        </h3>
        <div class="specialized-grid">
          {{#each this as |skill key|}}
          <div class="specialized-skill" data-item-id="{{skill.itemId}}">
            <span class="skill-name" data-category="language" data-skill="{{key}}" data-item-id="{{skill.itemId}}">
              <img class="skill-icon" src="{{skill.img}}" alt="{{skill.name}}"/>
              {{skill.name}}
            </span>
            <div class="skill-value-group">
              <span class="talent-stars-skill language-stars" data-item-id="{{skill.itemId}}" data-current-talent="{{skill.talent}}">
                {{#times skill.talent}}
                  <i class="fas fa-star language-star filled" data-star-level="{{sum this 1}}"></i>
                {{/times}}
                {{#times (subtract 3 skill.talent)}}
                  <i class="far fa-star language-star empty" data-star-level="{{sum (sum ../skill.talent this) 1}}"></i>
                {{/times}}
              </span>
            </div>
            <span class="skill-controls">
              <a class="language-delete" data-item-id="{{skill.itemId}}" title="Remove language">
                <i class="fas fa-trash"></i>
              </a>
            </span>
          </div>
          {{/each}}
        </div>
      </div>
    </div>
    {{/if}}
  {{/with}}
</div>
