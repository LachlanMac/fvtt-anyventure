<section class="moves-container">
  {{!-- Tab Navigation --}}
  <div class="inventory-tabs">
    <button class="inventory-tab active" data-tab="attacks">
      Attacks
    </button>
    <button class="inventory-tab" data-tab="actions">
      Actions
    </button>
    <button class="inventory-tab" data-tab="reactions">
      Reactions
    </button>
  </div>

  {{!-- Attacks Tab Content --}}
  <div class="inventory-tab-content active" data-tab-content="attacks">
    <div class="moves-section">
      <div class="section-header">
        <h3>{{localize "ANYVENTURE.WeaponAttacks"}}</h3>
      </div>
    <div class="moves-list">
      {{#each equippedWeapons as |attack|}}
      <div class="weapon-attack-item">
        <div class="weapon-attack-header">
          <div class="weapon-icon">
            <img src="{{attack.weaponIcon}}" alt="{{attack.weaponName}}" />
          </div>
          <div class="weapon-info">
            <h4 class="weapon-name">{{attack.weaponName}} [{{attack.category}}]</h4>
            <div class="weapon-meta">
              <span class="attack-type">{{attack.attackType}}</span>
              <span class="energy-cost">
                Energy:
                {{#if (eq attack.energy 0)}}
                  None
                {{else}}
                  {{#times attack.energy}}
                    <i class="fas fa-star filled"></i>
                  {{/times}}
                {{/if}}
              </span>
              <span class="range">{{attack.rangeText}}</span>
            </div>
          </div>
        </div>
        <div class="weapon-attack-details weapon-attack-clickable" data-attack-index="{{@index}}" title="Click to roll attack">
          <div class="damage-info">
            <span class="damage-dice">[{{attack.damage}}/{{attack.damageExtra}}]</span>
            <span class="damage-type-box {{attack.damageType.cssClass}}">{{attack.damageType.text}}</span>
            <span class="attack-dice">{{attack.attackDice}}{{attack.attackDiceType}}</span>
            {{#if (gt attack.secondaryDamage 0)}}
            <span class="secondary-damage-dice">[{{attack.secondaryDamage}}/{{attack.secondaryDamageExtra}}]</span>
            <span class="damage-type-box {{attack.secondaryDamageType.cssClass}}">{{attack.secondaryDamageType.text}}</span>
            {{/if}}
          </div>
        </div>
      </div>
      {{/each}}
      {{#unless equippedWeapons}}
      <div class="no-weapons-message">
        <em>No weapons equipped</em>
      </div>
      {{/unless}}
    </div>
    </div>
  </div>

  {{!-- Actions Tab Content --}}
  <div class="inventory-tab-content" data-tab-content="actions">
    <div class="moves-section">
    <div class="section-header">
      <h3>{{localize "ANYVENTURE.Actions"}}</h3>
      <a class="move-control header-add" data-action="create" data-move-type="actions" title="{{localize 'ANYVENTURE.AddAction'}}">
        <i class="fas fa-plus"></i>
      </a>
    </div>
    <div class="moves-list">
      {{#each system.moves.actions as |action id|}}
      <div class="move-item" data-move-id="{{id}}" data-move-type="actions">
        <input type="text" name="system.moves.actions.{{id}}.name" value="{{action.name}}" placeholder="{{localize 'ANYVENTURE.ActionName'}}"/>
        <input type="number" name="system.moves.actions.{{id}}.energyCost" value="{{action.energyCost}}" placeholder="0" min="0" max="10"/>
        <a class="move-control" data-action="delete"><i class="fas fa-trash"></i></a>
      </div>
      {{/each}}
    </div>
    </div>
  </div>

  {{!-- Reactions Tab Content --}}
  <div class="inventory-tab-content" data-tab-content="reactions">
    <div class="moves-section">
    <div class="section-header">
      <h3>{{localize "ANYVENTURE.Reactions"}}</h3>
      <a class="move-control header-add" data-action="create" data-move-type="reactions" title="{{localize 'ANYVENTURE.AddReaction'}}">
        <i class="fas fa-plus"></i>
      </a>
    </div>
    <div class="moves-list">
      {{#each system.moves.reactions as |reaction id|}}
      <div class="move-item" data-move-id="{{id}}" data-move-type="reactions">
        <input type="text" name="system.moves.reactions.{{id}}.name" value="{{reaction.name}}" placeholder="{{localize 'ANYVENTURE.ReactionName'}}"/>
        <input type="number" name="system.moves.reactions.{{id}}.energyCost" value="{{reaction.energyCost}}" placeholder="0" min="0" max="10"/>
        <a class="move-control" data-action="delete"><i class="fas fa-trash"></i></a>
      </div>
      {{/each}}
    </div>
    </div>
  </div>
</section>